window.Pikabu=function(){function n(){var e=["webkit","moz","o","ms"];var t=document.createElement("div");var n=document.getElementsByTagName("body")[0];var r=false;n.appendChild(t);for(var i=0;i<e.length;i++){var s=e[i];t.style[s+"OverflowScrolling"]="touch"}t.style.overflowScrolling="touch";var o=window.getComputedStyle(t);r=!!o.overflowScrolling;for(var i=0;i<e.length;i++){var s=e[i];if(!!o[s+"OverflowScrolling"]){r=true;break}}t.parentNode.removeChild(t);return r}function r(){var e=/Android\s+([\d\.]+)/.exec(window.navigator.userAgent);if(e&&e.length>0&&parseInt(e[1])<3){return true}return false}function i(){var e=document.body||document.documentElement;var t=e.style;var n="transition";if(typeof t[n]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1);for(var r=0;r<v.length;r++){if(typeof t[v[r]+n]=="string"){return true}}return false}var e={};var t=$("html");e.init=function(){if(n()){t.addClass("m-pikabu-overflow-scrolling")}if(r()){t.addClass("m-pikabu-legacy-android")}if(i()){t.addClass("m-pikabu-transitions")}$(".m-pikabu-nav-toggle").click(function(t){t.stopPropagation();e.showSidebar($(this).attr("data-role"))});$(".m-pikabu-overlay").click(function(t){t.stopPropagation();e.closeSidebars()})};e.showSidebar=function(e){$(".m-pikabu-sidebar").addClass("m-pikabu-overflow-touch");if(e=="left"||e=="right"){t.toggleClass("m-pikabu-"+e+"-visible");this.recalculateSidebarHeight($(window).height());window.scrollTo(0,1)}};e.closeSidebars=function(){t.removeClass("m-pikabu-left-visible m-pikabu-right-visible");$(".m-pikabu-viewport, .m-pikabu-container").css("height","auto");$(".m-pikabu-viewport").css("width","auto");window.scrollTo(0,1);setTimeout(function(){$(".m-pikabu-sidebar").removeClass("m-pikabu-overflow-touch")},250)};e.recalculateSidebarHeight=function(e){var n=$(".m-pikabu-viewport");n.width($(window).width());if(t.hasClass("m-pikabu-overflow-scrolling")&&(t.hasClass("m-pikabu-left-visible")||t.hasClass("m-pikabu-right-visible"))){$(".m-pikabu-container, .m-pikabu-sidebar").height(e);n.height(e)}else{var r=window.pageYOffset;n.removeAttr("style");var i=$(".m-pikabu-right.m-pikabu-sidebar").removeAttr("style");var s=$(".m-pikabu-left.m-pikabu-sidebar").removeAttr("style");var o=$(window).height();if(t.hasClass("m-pikabu-left-visible")){if(s.height()>o){n.height(s.height())}else{s.height(o);n.height(o)}}else if(t.hasClass("m-pikabu-right-visible")){if(i.height()>o){n.css("height",i.height())}else{i.css("min-height",o);n.css("height",o)}}window.scrollTo(0,r)}};return e};$(document).ready(function(){pikabu=new Pikabu;pikabu.init()});$(window).on("orientationchange",function(e){pikabu.recalculateSidebarHeight($(window).height())})